<div class="navbar navbar-expand-sm navbar-light navbar-lewagon">
  <div class="logo-and-sitename">
    <%= link_to root_path, class: "navbar-brand" do %>
      <%= image_tag "cloth_icon.png" %>
    <% end %>
    <h1 class='brand-name'>Wonderobe</h1>
  </div>

  <%= form_tag listings_path, class: "form-inline", method: :get do %>
    <%= text_field_tag :query,
      params[:query],
      class: "form-control px-4",
      placeholder: "Find a listing"
    %>

    <%= button_tag(type: "submit", class: "btn btn-default mx-2 px-3") do %>
      <i class="fas fa-search"></i>
    <% end %>
  <% end %>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <% if user_signed_in? %>
          <% if current_user.photo.attached? %>
            <%= cl_image_tag current_user.photo.key, class: "avatar dropdown-toggle", id: "navbarDropdown", data: { toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false %>
          <% else %>
            <i class="fas fa-user-circle fa-2x" id='navbarDropdown' data-toggle='dropdown' aria-expanded='false' aria-haspopup='true'></i>
          <% end %>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
            <%= link_to "Profile", user_path(current_user), class: "dropdown-item" %>
            <%= link_to "Settings", edit_user_path(current_user), class: "dropdown-item" %>
            <%= link_to "Log out", destroy_user_session_path, method: :delete, class: "dropdown-item" %>
          </div>
        </li>
      <% else %>
        <li class="nav-item">
          <%= link_to "Login", new_user_session_path, class: "nav-link" %>
        </li>
      <% end %>
    </ul>
  </div>
</div>
